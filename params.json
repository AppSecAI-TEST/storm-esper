{"name":"Storm-esper","body":"# Storm-Esper\r\n\r\nA library to integrate [Esper](http://esper.codehaus.org) with [Storm](https://github.com/nathanmarz/storm).\r\n\r\n## License\r\n\r\nEsper is GPLv2 licensed, which means that this library is GPLv2 licensed, as well. You can find the license\r\n[here](http://www.opensource.org/licenses/gpl-2.0.php).\r\n\r\n## Description\r\n\r\nThe `storm-esper` library provides a [bolt](https://github.com/nathanmarz/storm/wiki/Concepts) that allows\r\nyou to use Esper queries on Storm data streams.\r\n\r\nThe bolt is created via a builder:\r\n\r\n    EsperBolt esperBolt =\r\n        new EsperBolt.Builder()\r\n                     .inputs()\r\n                        .aliasComponent(\"some-spout\")\r\n                        .withFields(\"a\", \"b\")\r\n                        .ofType(Integer.class)\r\n                        .toEventType(\"Test\")\r\n                     .outputs()\r\n                        .outputs().onDefaultStream().emit(\"min\", \"max\")\r\n                     .statements()\r\n                        .add(\"select max(a) as max, min(b) as min from Test.win:length_batch(4)\")\r\n                     .build();\r\n\r\n### `inputs`\r\n\r\nThe `inputs` section allows you to define aliases for storm streams and type hints. An input alias defines an\r\nalias for a Storm stream that can be used in the Esper queries instead of the automatically generated one.\r\nBy default, the bolt will assign the event name `<component id>_<stream id>` where `component id` is the name\r\nof the spout/bolt that generates the data to be fed into the Esper bolt, and `stream id` is the id of the\r\nspecific stream that the Esper bolt is connected to (if the source spout/bolt only has one output, then this\r\nis usually `default`). The `aliasComponent` and `aliasStream` methods allows to define a different name for a\r\nspecific stream of a specific component (`default` in the case of `aliasComponent`). E.g. in the example\r\nthe stream `default` of the component `some-spout` was mapped to the Esper event type `Test`.\r\nType hints are necessary to give Esper enough information about how to deal with properties of event types.\r\nStorm streams are untyped in the sense that Storm itself does not maintain type information for the individual\r\nfields in a tuple. On the other hand, Esper requires strongly typed event type definitions. By default,\r\n`storm-esper` will use `Object` for all properties which works fine for counting, `max` and `min`, etc. However\r\nfor Esper functions that require numbers (such as `sum`) this does not work and you'll need to define a type\r\nhint. In the example above, fields `a` and `b` of the tuples coming from `some-spout` are declared to be of\r\ntype `Integer` (which is equivalent to `int` as far as Esper is concerned).\r\n\r\n### `outputs`\r\n\r\nIn order to push data from Esper back into Storm, you'll need to specify which streams the bolt will emit\r\n(via `onDefaultStream` for the default stream which is called `default`, or via `onStream` for named streams),\r\nand also which properties from which event types to emit into these streams (`emit` method).\r\nBasic `SELECT` esper statements (as in the example above) work on a default anonymous event type. Unless you\r\ntell the builder to use a specific event type (with `fromEventType`), it will assume this default event type.\r\n\r\n### `statements`\r\n\r\nThis is basically the list of statements to give to Esper. If the Esper statements generate new events\r\n (e.g. `insert into <name>`), then you can use select these via the `fromEventType` method in the builder\r\nin order to map them to Storm streams. This allows you to generate more than stream from one Esper bolt.\r\n\r\n## How to get\r\n\r\nUse a Maven dependency in your pom.xml:\r\n\r\n    <dependency>\r\n      <groupId>org.tomdz.storm</groupId>\r\n      <artifactId>storm-esper</artifactId>\r\n      <version>0.7.1-SNAPSHOT</version>\r\n    </dependency>\r\n","tagline":"Storm - Esper integration experiment","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}